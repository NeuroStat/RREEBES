rm(list=ls())
# Load packages:
library(tidyr)
library(dplyr)
library(lubridate)
library(stringr)
library(ggplot2)
library(RCurl)
library(reshape2)
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/blob/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), skip=0,
header=T)
head(dd)
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
head(dd)
# clean R's memory:
rm(list=ls())
# Load packages:
library(tidyr)
library(dplyr)
library(lubridate)
library(stringr)
library(ggplot2)
library(RCurl)
library(reshape2)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# head(dd)
# str(dd)
head(dd)
unique(dd$dd$Life.style)
unique(dd$Life.style)
par(mfrow=c(1,3))
plot(Mean.density..m.. ~ Variance, data=dd[dd$Life.style=="Free-living",])
plot(Mean.density..m.. ~ Variance, data=dd[dd$Life.style=="Free-living parasitised",])
plot(Mean.density..m.. ~ Variance, data=dd[dd$Life.style=="Parasite",])
plot(Variance ~ Mean_density, data=dd[dd$Life.style=="Free-living",])
plot(Variance ~ Mean_density, data=dd[dd$Life.style=="Free-living parasitised",])
plot(Variance ~ Mean_density, data=dd[dd$Life.style=="Parasite",])
colnames(dd)[which(names(dd) == "Mean.density..m..")] <- "Mean_density"
plot(Variance ~ Mean_density, data=dd[dd$Life.style=="Free-living",])
plot(Variance ~ Mean_density, data=dd[dd$Life.style=="Free-living parasitised",])
plot(Variance ~ Mean_density, data=dd[dd$Life.style=="Parasite",])
colnames(dd)[which(names(dd) == "Body.mass..mg.")] <- "Body_mass_mg"
plot(Log.variance ~ Log.mean, data=dd[dd$Life.style=="Free-living",])
plot(Log.variance ~ Log.mean, data=dd[dd$Life.style=="Free-living parasitised",])
plot(Log.variance ~ Log.mean, data=dd[dd$Life.style=="Parasite",])
plot(Log.variance ~ Log.mean, data=dd[dd$Life.style=="Free-living",],
xlim=c(-3,5), ylim=c(-6,10),
xlab="log mean", ylab="log variance")
abline(lm(Log.variance ~ Log.mean, data=dd[dd$Life.style=="Free-living",]))
plot(Log.variance ~ Log.mean, data=dd[dd$Life.style=="Free-living parasitised",],
xlim=c(-3,5), ylim=c(-6,10),
xlab="log mean", ylab="log variance")
abline(lm(Log.variance ~ Log.mean, data=dd[dd$Life.style=="Free-living parasitised",]))
plot(Log.variance ~ Log.mean, data=dd[dd$Life.style=="Parasite",],
xlim=c(-3,5), ylim=c(-6,12),
xlab="log mean", ylab="log variance")
abline(lm(Log.variance ~ Log.mean, data=dd[dd$Life.style=="Parasite",]))
source('~/.active-rstudio-document', echo=TRUE)
# clean R's memory:
rm(list=ls())
# Load packages:
library(tidyr)
library(dplyr)
library(lubridate)
library(stringr)
library(ggplot2)
library(RCurl)
library(reshape2)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# head(dd)
# str(dd)
colnames(dd)[which(names(dd) == "Mean.density..m..")] <- "Mean_density"
colnames(dd)[which(names(dd) == "Body.mass..mg.")] <- "Body_mass_mg"
colnames(dd)
rm(list=ls())
# Load packages:
library(tidyr)
library(dplyr)
library(lubridate)
library(stringr)
library(ggplot2)
library(RCurl)
library(reshape2)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# head(dd)
# str(dd)
# make some colnames more R-friendly:
colnames(dd)[which(names(dd) == "Mean.density..m..")] <- "Mean_density"
colnames(dd)[which(names(dd) == "Body.mass..mg.")] <- "Body_mass_mg"
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
?aggregate
rm(list=ls())
# Load packages:
library(tidyr)
library(dplyr)
library(lubridate)
library(stringr)
library(ggplot2)
library(RCurl)
library(reshape2)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# head(dd)
# str(dd)
# make some colnames more R-friendly:
colnames(dd)[which(names(dd) == "Mean.density..m..")] <- "Mean_density"
colnames(dd)[which(names(dd) == "Body.mass..mg.")] <- "Body_mass_mg"
counts <- aggregate(x=dd, by=list(Taxa=Taxonomic.group, lifestyle=Life.style), FUN=length)
counts <- aggregate(x=dd, by=list(Taxa=dd$Taxonomic.group, lifestyle=dd$Life.style), FUN=length)
count
counts
counts <- aggregate(x=dd, by=list(Taxa=dd$Taxonomic.group, lifestyle=dd$Life.style), FUN=length(dd$Species))
dd[,c("Taxonomic.group", "Life.style", "Species")]
counts <- aggregate(x=dd$Species, by=list(Taxa=dd$Taxonomic.group, lifestyle=dd$Life.style), function(x) length(unique(x)))
counts
counts <- aggregate(x=dd$Species, by=list(Taxa=dd$Taxonomic.group, lifestyle=dd$Life.style), function(x) length(x))
counts
total <- aggregate(x=dd$Species, by=list(Taxa=dd$Taxonomic.group), function(x) length(x))
total
counts <- aggregate(x=dd$Species, by=list(Taxa=dd$Taxonomic.group, lifestyle=dd$Life.style), function(x) length(x))
colnames(counts)<-c("Taxa", "Lifestyle","Counts")
total <- aggregate(x=dd$Species, by=list(Taxa=dd$Taxonomic.group), function(x) length(x))
colnames(total)<- c("Taxa", "Total")
tab1 <- merge(counts, total, by="Taxa")
tab1
tab1$Taxa
tab1$percent
tab1$percent <- tab1$Counts / tab1$Total * 100
tab1
counts <- aggregate(x=dd$Species, by=list(Taxa=dd$Taxonomic.group, lifestyle=dd$Life.style), function(x) length(x))
colnames(counts)<-c("Taxa", "Lifestyle","Counts")
total <- aggregate(x=dd$Species, by=list(Lifestyle=dd$Life.style), function(x) length(x))
colnames(total)<- c("Taxa", "Total")
tab1 <- merge(counts, total, by="Taxa")
tab1$percent <- tab1$Counts / tab1$Total * 100
tab1
counts <- aggregate(x=dd$Species, by=list(Taxa=dd$Taxonomic.group, lifestyle=dd$Life.style), function(x) length(x))
colnames(counts)<-c("Taxa", "Lifestyle","Counts")
total <- aggregate(x=dd$Species, by=list(Lifestyle=dd$Life.style), function(x) length(x))
colnames(total)<- c("Taxa", "Total")
tab1 <- merge(counts, total, by="Taxa")
counts
total
colnames(total)<- c("Lifestyle", "Total")
tab1 <- merge(counts, total, by="Taxa")
total
counts
tab1 <- merge(counts, total, by="Lifestyle")
tab1
tab1$percent <- tab1$Counts / tab1$Total * 100
tab1
tab1$percent <- round(tab1$percent, 3)
tab1
tab1$percent <- round(tab1$percent, 0)
tab1
total <- aggregate(x=dd$Species, by=list(Lifestyle=dd$Life.style), function(x) ifelse(length(x)=0, 0, length(x)))
lenth.keep.zeroes <- function(x){ifelse(length(x)=0, 0, length(x))}
length(c())
# clean R's memory:
rm(list=ls())
# Load packages:
library(tidyr)
library(dplyr)
library(lubridate)
library(stringr)
library(ggplot2)
library(RCurl)
library(reshape2)
# Load data:
dd <- read.csv(text=getURL("https://raw.githubusercontent.com/marcoplebani85/RREEBES/Lagrue/Lagrue_etal_2014_PNAS/data/Lague2014.csv"), header=T)
# head(dd)
# str(dd)
# make some colnames more R-friendly:
colnames(dd)[which(names(dd) == "Mean.density..m..")] <- "Mean_density"
colnames(dd)[which(names(dd) == "Body.mass..mg.")] <- "Body_mass_mg"
length.keepzeroes<- function(x){
length()
ifelse(length(x)==0, 0)}
length.keepzeroes
length.keepzeroes(C())
length.keepzeroes(c())
length.keepzeroes<- function(x){
length()
ifelse(length(x)==0, 0, length(x))}
length.keepzeroes(c())
length(c())
counts <- aggregate(x=dd$Species, by=list(Taxa=dd$Taxonomic.group, lifestyle=dd$Life.style), function(x) length(x))
colnames(counts)<-c("Taxa", "Lifestyle","Counts")
total <- aggregate(x=dd$Species, by=list(Lifestyle=dd$Life.style), function(x) length(x))
colnames(total)<- c("Lifestyle", "Total")
counts
total
?aggregate
counts2 <- tapply(dd$Species, list(Taxa=dd$Taxonomic.group, lifestyle=dd$Life.style), length)
counts2
counts2.bytaxa <- tapply(dd$Species, list(Taxa=dd$Taxonomic.group), length)
counts2.bytaxa
class(counts2.bytaxa)
as.vector(counts2.bytaxa)
